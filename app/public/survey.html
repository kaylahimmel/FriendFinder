<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    
    <title>Frnd Fndr: Survey</title>
    
    <!--Boostrap CSS-->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <!--Google fonts-->
    <link href="https://fonts.googleapis.com/css?family=Passion+One:700|Lato:300" rel="stylesheet">
    <!--My own CSS-->
    <link rel="stylesheet" href="assets/css/style.css">
</head>

<body>
    <header>
        <div class="jumbotron">
            <h1 class="display-4">Frnd Fndr: Friend Matching App</h1>
            <a href="https://www.16personalities.com/free-personality-test">
                <p class="credit">(Based off 16Personalities' NERIS Type Explorer)</p>
            </a>
            <hr>
            <p class="how-to"><strong>How this works:</strong></p>
            <p class="how-to">Type your name and upload a photo.</p>
            <p class="how-to">Then, answer each question on a scale of 1 to 5 where 1 = strongly disagree and 5 = strongly agree.</p>
        </div>
    </header>

    <div id="newFriend"></div>

    <div class="form-group">
        <form class="quiz">
            <label for="name">Your first name (required):</label>
            <input type="text" id="name" name="" class="form-control" required>
            <br>
            <label for="image">Upload a .png or .jpg of yourself (required)</label>
            <input type="file" id="image" accept="image/png, image/jpeg" name="" class="chosen-select" data-placeholder="" required>
            <br>
            
            <label class="questions" for="q1">Q1: I frequently misplace my things.</label>
            <select class="chosen-select" data-placeholder="" id="q1">
                <option value=""> </option>
                <option value="1">1 - I strongly disagree</option>
                <option value="2">2 - I somewhat disagree</option>
                <option value="3">3 - I don't have an opinion</option>
                <option value="4">4 - I somewhat agree</option>
                <option value="5">5 - I strongly agree</option>
            </select>
            
            <label class="questions" for="q2">Q2: I enjoy going to social events that involve dress-up or role-play activities.</label>
            <select class="chosen-select" data-placeholder="" id="q2">
                <option value=""> </option>
                <option value="1">1 - I strongly disagree</option>
                <option value="2">2 - I somewhat disagree</option>
                <option value="3">3 - I don't have an opinion</option>
                <option value="4">4 - I somewhat agree</option>
                <option value="5">5 - I strongly agree</option>
            </select>

            <label class="questions" for="q3">Q3: I often get so lost in my thoughts that I ignore or forget my surroundings.</label>
            <select class="chosen-select" data-placeholder="" id="q3">
                <option value=""> </option>
                <option value="1">1 - I strongly disagree</option>
                <option value="2">2 - I somewhat disagree</option>
                <option value="3">3 - I don't have an opinion</option>
                <option value="4">4 - I somewhat agree</option>
                <option value="5">5 - I strongly agree</option>
            </select>

            <label class="questions" for="q4">Q4: An interesting book or a video game is often better than a social event.</label>
            <select class="chosen-select" data-placeholder="" id="q4">
                <option value=""> </option>
                <option value="1">1 - I strongly disagree</option>
                <option value="2">2 - I somewhat disagree</option>
                <option value="3">3 - I don't have an opinion</option>
                <option value="4">4 - I somewhat agree</option>
                <option value="5">5 - I strongly agree</option>
            </select>

            <label class="questions" for="q5">Q5: If the room is full, you stay closer to the walls, avoiding the center.</label>
            <select class="chosen-select" data-placeholder="" id="q5">
                <option value=""> </option>
                <option value="1">1 - I strongly disagree</option>
                <option value="2">2 - I somewhat disagree</option>
                <option value="3">3 - I don't have an opinion</option>
                <option value="4">4 - I somewhat agree</option>
                <option value="5">5 - I strongly agree</option>
            </select>

            <label class="questions" for="q6">Q6: I rarely do something just out of sheer curiosity.</label>
            <select class="chosen-select" data-placeholder="" id="q6">
                <option value=""> </option>
                <option value="1">1 - I strongly disagree</option>
                <option value="2">2 - I somewhat disagree</option>
                <option value="3">3 - I don't have an opinion</option>
                <option value="4">4 - I somewhat agree</option>
                <option value="5">5 - I strongly agree</option>
            </select>

            <label class="questions" for="q7">Q7: I think that everyoneâ€™s views should be respected regardless of whether they are supported by facts or not.</label>
            <select class="chosen-select" data-placeholder="" id="q7">
                <option value=""> </option>
                <option value="1">1 - I strongly disagree</option>
                <option value="2">2 - I somewhat disagree</option>
                <option value="3">3 - I don't have an opinion</option>
                <option value="4">4 - I somewhat agree</option>
                <option value="5">5 - I strongly agree</option>
            </select>

            <label class="questions" for="q8">Q8: I do not mind being at the center of attention.</label>
            <select class="chosen-select" data-placeholder="" id="q8">
                <option value=""> </option>
                <option value="1">1 - I strongly disagree</option>
                <option value="2">2 - I somewhat disagree</option>
                <option value="3">3 - I don't have an opinion</option>
                <option value="4">4 - I somewhat agree</option>
                <option value="5">5 - I strongly agree</option>
            </select>

            <label class="questions" for="q9">Q9: I feel more energetic after spending time with a group of people.</label>
            <select class="chosen-select" data-placeholder="" id="q9">
                <option value=""> </option>
                <option value="1">1 - I strongly disagree</option>
                <option value="2">2 - I somewhat disagree</option>
                <option value="3">3 - I don't have an opinion</option>
                <option value="4">4 - I somewhat agree</option>
                <option value="5">5 - I strongly agree</option>
            </select>

            <label class="questions" for="q10">Q10: My travel plans are usually well thought out.</label>
            <select class="chosen-select" data-placeholder="" id="q10">
                <option value=""> </option>
                <option value="1">1 - I strongly disagree</option>
                <option value="2">2 - I somewhat disagree</option>
                <option value="3">3 - I don't have an opinion</option>
                <option value="4">4 - I somewhat agree</option>
                <option value="5">5 - I strongly agree</option>
            </select>

        </form>
        <button type="button" id="submit" class="btn btn-primary btn-lg btn-block">Find My New Friend</button>

    </div>

    <!-- Large modal -->
    <div id="resultsModal" class="modal fade bd-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <h5>Your Friend Match:</h5>
            <img id="matchPhoto">
            <h3 id="matchName"></h3>
        </div>
    </div>
    </div>

    <footer></footer>
    <!--jQuery & Bootstrap-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
    <!--My own JS-->
    <!-- <script type="text/javascript" src="./assets/javascript/survey.js"></script> -->
    
    <script type="text/javascript">
    $("#submit").on("click", function(event) {
        event.preventDefault();
    
        var userData = {
            name: $("#name").val(),
            photo: $("#image").val(),
            scores: [
                $("#q1").val(),
                $("#q2").val(),
                $("#q3").val(),
                $("#q4").val(),
                $("#q5").val(),
                $("#q6").val(),
                $("#q7").val(),
                $("#q8").val(),
                $("#q9").val(),
                $("#q10").val()
            ]
        };
        
        $.post("/api/friends", userData, function(data) {  // ERRORING OUT ON THIS LINE
            $("#matchPhoto").attr("src", data.friendImage);
            $("#matchName").text(data.friendName);
            $("#resultsModal").modal('toggle');
        });
        
        // runApp(userData);
        // $(".quiz").empty();
        // $(".quiz").hide();
    });
    
    console.log("test")
    
    // function runApp(newUser) {
    //     $.post("/api/friends", newUser, function(data) {
    //         console.log(data.name)
    //     })                 
    // };
    </script>

</body>

</html>